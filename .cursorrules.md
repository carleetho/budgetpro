# ğŸ›¡ï¸ AXIOM - Architectural Integrity Guardian (BudgetPro)

## ğŸš¨ REGLA SUPREMA: AXIOM ES LEY

AXIOM es el guardiÃ¡n arquitectÃ³nico de este proyecto. TODAS las sugerencias de cÃ³digo DEBEN pasar validaciÃ³n AXIOM antes de ser ejecutadas. NO realices cambios que violen las reglas arquitectÃ³nicas.

---

## ğŸ§¼ PROTOCOLO "MANOS LIMPIAS" (ANTIGRAVITY EXCLUSIVE)

En caso de fallos de compilaciÃ³n masivos (>50 errores):

1. **DIAGNÃ“STICO SIN MUTACIÃ“N**: Extraer Ãºnicamente los **primeros 20 errores** para identificar la raÃ­z. No editar archivos hasta que la raÃ­z sea confirmada.
2. **PRIORIDAD DE CONSUMIDORES**: Si la falla es una referencia rota a una clase de Dominio, se corregirÃ¡ el `import` o la llamada en `Application/Infrastructure`. **NUNCA** se corregirÃ¡ el Dominio para satisfacer un error de capa superior.
3. **STOP EN ZONA ROJA**: Si la raÃ­z estÃ¡ **realmente** en `com.budgetpro.domain`, detenerse, presentar un `implementation_plan.md` y esperar aprobaciÃ³n explÃ­cita.
4. **VALIDACIÃ“N ATÃ“MICA**: Cada cambio individual debe ser validado con `./axiom.sh --dry-run` antes de proceder al siguiente.

---

## ğŸ¯ INICIALIZACIÃ“N AUTOMÃTICA

Antes de Escribir Cualquier CÃ³digo:

1. **SIEMPRE ejecuta**: `./axiom.sh --dry-run` para validar el estado actual.
2. **VERIFICA** que no hay violaciones pendientes.
3. **CONSULTA** `.budgetpro/axiom.config.yaml` para entender las reglas.

---

## ğŸ›ï¸ ARQUITECTURA HEXAGONAL - REGLAS INQUEBRANTABLES

```
Domain (Core) â† Application â† Infrastructure
     â†‘              â†‘              â†‘
   NUNCA         NUNCA          PUEDE
  dependes       depende        depender
    de            de            de
  nada          Infra         todo
```

---

## ğŸ”’ PROTECCIÃ“N POR ZONAS (BLAST RADIUS)

### Zona RED

- **Ruta**: `domain/finanzas/presupuesto` | **LÃ­mite**: 1 archivos/commit
- **Ruta**: `domain/finanzas/estimacion` | **LÃ­mite**: 1 archivos/commit
- **Ruta**: `domain/valueobjects` | **LÃ­mite**: 1 archivos/commit
- **Ruta**: `domain/entities` | **LÃ­mite**: 1 archivos/commit

### Zona YELLOW

- **Ruta**: `infrastructure/persistence` | **LÃ­mite**: 3 archivos/commit

### Zona GREEN

- **Ruta**: `application` | **LÃ­mite**: 10 archivos/commit
- **Ruta**: `infrastructure/web` | **LÃ­mite**: 10 archivos/commit
- **Ruta**: `tests` | **LÃ­mite**: 10 archivos/commit

---

## ğŸ¤– INSTRUCCIONES PARA AI ASSISTANTS

âœ… Verifica Blast Radius del cambio
âœ… Confirma que no hay secretos expuestos
âœ… Asegura que no hay Lazy Code
âœ… Verifica Arquitectura Hexagonal / Aislamiento de Dominio

### â›” PROHIBICIÃ“N ESTRICTA DE BYPASS

- **NUNCA** modifiques archivos de configuraciÃ³n (`axiom.config.yaml`, `.cursorrules`) o scripts de validaciÃ³n para saltar un bloqueo.
- **SIEMPRE** si un cambio es bloqueado por AXIOM o la Gobernanza, divide el trabajo en commits mÃ¡s pequeÃ±os o pide permiso al USER.
- **EL BYPASS ES UNA VIOLACIÃ“N CRÃTICA**: No uses `--no-verify` ni alteres los lÃ­mites para "completar la tarea".

### ğŸš€ WORKFLOW

1. `./axiom.sh --status`
2. `./axiom.sh --dry-run`

---

âš™ï¸ MODO OPERATIVO DEL SISTEMA (AGENT OPERATING MODES)

El IDE DEBE detectar y declarar explÃ­citamente el modo operativo antes de proponer o ejecutar cambios.

ğŸ”´ MODE_0 â€” CONTENCIÃ“N (EMERGENCY LOCKDOWN)

CondiciÃ³n de entrada (cualquiera):

MÃ¡s de 50 errores de compilaciÃ³n

El proyecto no compila

Evidencia de modificaciÃ³n masiva no autorizada (â€œBig Bangâ€)

CI completamente en rojo

Objetivo Ãºnico:

Restaurar la capacidad de compilaciÃ³n del sistema.

Reglas:

âŒ Prohibido agregar features

âŒ Prohibido refactorizar

âŒ Prohibido cambiar semÃ¡ntica de dominio

âœ… Permitido modificar mÃºltiples archivos SOLO si:

todos contribuyen a un mismo objetivo tÃ©cnico

el objetivo es â€œque compileâ€

Unidad de trabajo permitida:

Atomicidad por objetivo, no por archivo.

Ejemplos vÃ¡lidos:

eliminar mÃ©todos duplicados

corregir imports rotos

revertir clases inconsistentes

comentar cÃ³digo invÃ¡lido

Ejemplos prohibidos:

renombrar enums

cambiar lÃ³gica de negocio

â€œaprovechar para mejorarâ€

ğŸŸ¡ MODE_1 â€” ESTABILIZACIÃ“N ACELERADA (CONTROLLED BATCH)

CondiciÃ³n de entrada:

El proyecto compila

Tests fallan o hay warnings masivos

Baseline funcional, pero inestable

Objetivo:

Reducir ruido y restaurar un baseline limpio.

Reglas:

âŒ No cambios de dominio

âŒ No decisiones de negocio

âœ… Cambios agrupados por causa raÃ­z

âœ… Se permiten batches temÃ¡ticos

Unidad de trabajo:

Batch atÃ³mico temÃ¡tico

mÃºltiples archivos

una sola causa

un solo commit

ğŸŸ¢ MODE_2 â€” OPERACIÃ“N NORMAL (ATOMICIDAD ESTRICTA)

CondiciÃ³n de entrada:

Build verde

CI estable

Sin deuda crÃ­tica activa

Objetivo:

EvoluciÃ³n segura del sistema.

Reglas:

âœ… 1 causa = 1 commit

âœ… Cambios atÃ³micos estrictos

âœ… Aplican todas las reglas AXIOM, Blast Radius y Gobernanza

ğŸ§  CLASIFICACIÃ“N DE RIESGO (OBLIGATORIA)

Antes de ejecutar cualquier cambio, el IDE DEBE clasificar el riesgo:

ğŸŸ¢ RISK: LOW

EliminaciÃ³n de duplicados

Fix de compilaciÃ³n

Cambios mecÃ¡nicos sin semÃ¡ntica

Comentarios / imports / visibilidad

Comportamiento del IDE:

âœ… Puede ejecutar automÃ¡ticamente

ğŸ”” Debe informar al usuario lo realizado

ğŸŸ¡ RISK: MID

Cambios de flujo

Ajustes de servicios

ReorganizaciÃ³n interna

Comportamiento del IDE:

â“ Debe proponer y esperar aprobaciÃ³n explÃ­cita

âŒ No ejecutar sin confirmaciÃ³n

ğŸ”´ RISK: HIGH

Dominio (com.budgetpro.domain)

Enums

Estados

Contratos pÃºblicos

SemÃ¡ntica de negocio

Comportamiento del IDE:

â›” Prohibido ejecutar

ğŸ“„ Debe generar un analysis_plan.md

â¸ï¸ Esperar aprobaciÃ³n explÃ­cita del USER

ğŸ§© DEFINICIÃ“N FORMAL DE â€œATOMICIDADâ€

âš ï¸ Atomicidad NO significa â€œun archivoâ€.

âœ”ï¸ Una actividad ES atÃ³mica si:

persigue un solo objetivo

tiene una sola causa raÃ­z

puede revertirse sin efectos colaterales

âŒ NO es atÃ³mica si:

mezcla objetivos

combina correcciones con mejoras

toca dominio sin justificaciÃ³n

ğŸ›‘ PROTOCOLO ANTI â€œBIG BANGâ€

El IDE TIENE PROHIBIDO:

modificar mÃ¡s de N archivos sin declarar el modo operativo

ejecutar cambios masivos sin diagnÃ³stico previo

â€œseguir arreglandoâ€ sin re-ejecutar ./axiom.sh --dry-run

Regla dura:

NingÃºn cambio masivo puede ocurrir sin haber pasado primero por MODE_0 o MODE_1 explÃ­citamente.

ğŸ§­ AUTONOMÃA RESPONSABLE DEL IDE

Cuando el RISK es LOW y el MODE lo permite, el IDE:

NO debe preguntar quÃ© hacer

DEBE ejecutar la opciÃ³n tÃ©cnicamente mÃ¡s segura

DEBE documentar lo hecho

DEBE detenerse tras completar la unidad de trabajo

El USER confirma despuÃ©s, no decide el paso tÃ©cnico.

ğŸ“Œ PRINCIPIO FINAL

La velocidad sin control rompe el sistema.
El control sin contexto paraliza.
Este proyecto exige gobernanza adaptativa.

---

_Ãšltima actualizaciÃ³n: 2026-01-30_
_Gobernanza Generada desde: axiom.config.yaml_
